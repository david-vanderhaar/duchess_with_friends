import{w as m}from"./paths.903e8d0e.js";let s;const U=new Uint8Array(16);function S(){if(!s&&(s=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!s))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return s(U)}const d=[];for(let t=0;t<256;++t)d.push((t+256).toString(16).slice(1));function I(t,e=0){return(d[t[e+0]]+d[t[e+1]]+d[t[e+2]]+d[t[e+3]]+"-"+d[t[e+4]]+d[t[e+5]]+"-"+d[t[e+6]]+d[t[e+7]]+"-"+d[t[e+8]]+d[t[e+9]]+"-"+d[t[e+10]]+d[t[e+11]]+d[t[e+12]]+d[t[e+13]]+d[t[e+14]]+d[t[e+15]]).toLowerCase()}const w=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),l={randomUUID:w};function y(t,e,c){if(l.randomUUID&&!e&&!t)return l.randomUUID();t=t||{};const a=t.random||(t.rng||S)();if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,e){c=c||0;for(let p=0;p<16;++p)e[c+p]=a[p];return e}return I(a)}const D=(t,e)=>x(t,e),x=(t,e)=>{const c=localStorage.getItem(t),{subscribe:a,set:p,update:i}=m(JSON.parse(c)||e);a(n=>localStorage.setItem(t,JSON.stringify(n)));const g=()=>JSON.parse(localStorage.getItem(t));return{subscribe:a,update:n=>i(()=>n),updateById:(n,u)=>{i(r=>r.map(o=>o.uuid==n?{...o,...u}:o))},add:n=>i(u=>[...u,{uuid:y(),...n}]),addOrUpdate:n=>{const u=g().find(r=>r.uuid==n.uuid);i(u?r=>r.map(o=>o.uuid==n.uuid?{...o,...n}:o):r=>[...r,{uuid:y(),...n}])},getById:n=>g().find(u=>u.uuid==n),delete:n=>i(u=>u.filter(r=>r.uuid!=n)),edit:(n,u)=>{i(r=>r.map(o=>o.uuid==n?{...o,...u}:o))}}},h=D("gameDataPersistent",[]);export{h as g,y as v};
